@model IEnumerable<GEOnet.Models.geoModel>
@{
    ViewData["Title"] = "geomapall";

}

<!DOCTYPE HTML>
<html>
<head>
    <title>Leaflet</title>
    <style>
        #map {
            /*width: 600px;
            height: 400px;*/
            width: auto;
            height: 400px;
        }
    </style>

    <link rel="stylesheet" href="~/js/leaflet/leaflet.css" />
    <script src="~/js/leaflet/leaflet.js"></script>

    <link rel="stylesheet" href="~/js/leaflet/MarkerCluster.css" />
        <link rel="stylesheet" href="~/js/leaflet/MarkerCluster.Default.css" />
        <script src="~/js/leaflet/leaflet.markercluster-src.js"></script>

    
    <script>
        function initmap(resultlocation) {

            var locations = resultlocation;

            latitude = locations[0][0];
            longitude = locations[0][1];
            if (locations == null) {
                latitude = 37.36;
                longitude = 55.45;
                //alert("Координаты не заданы");
            }
            var map = L.map('map').setView([latitude,longitude], 7);
            //var map = L.map('map').setView([locations[0][0], locations[0][1]], 10);
            L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
               attribution: '&copy; <a rel="nofollow" href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            //lc = [[11.8166, 122.0942],]; - пример того как приходят координаты из контроллера

            //var locations = resultlocation;

                for (var i = 0; i < locations.length; i++) {
                    marker = new L.marker([locations[i][0],locations[i][1]])                                    
                                    .addTo(map);
            }
            
        }

/**/</script>
</head>


<table align="center" border="0" width="100%">
    <tr>
        <td>Пользователь:  @ViewData["Name"]  </td>
    </tr>
    <tr>
        <td>Усройство:   @ViewData["Dev"]</td>
    </tr>    
    <tr>
        <td>Дата: @ViewData["GeoDT"], Время: @ViewData["GeoTM"]</td>
    </tr>
    <tr>
        <td height="60%">
                <body onload="initmap(@ViewData["Resultlocation"]);">
                    @*<div id="basicMap" style="width:700px; height:500px" ></div>*@
                    <div id="map"></div>

                </body>

            </td>
    </tr>
</table>
</html>
